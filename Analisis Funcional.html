<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown: Rich Preview</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>
        // Initialize highlight.js
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        });

        // Copy to clipboard function
        function copyToClipboard(button) {
            const codeBlock = button.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.backgroundColor = '#4CAF50';
                button.style.color = 'white';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.backgroundColor = '';
                    button.style.color = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
    </script>
    <style>
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
            font-size: 14px;
            line-height: 1.6;
            padding: 0 20px;
        }
        /* Twemoji emoji image style for inline, text-sized emojis */
        img.emoji {
            height: 1em;
            width: 1em;
            margin: 0 .05em 0 .1em;
            vertical-align: -0.1em;
            display: inline;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            margin-top: 24px;
            margin-bottom: 16px;
            line-height: 1.25;
        }
        
        h1 { 
            font-size: 2em; 
            border-bottom: 1px solid #eaecef; 
            padding-bottom: 0.3em;
            margin-top: 0.67em 0;
        }
        
        h2 { 
            font-size: 1.5em; 
            border-bottom: 1px solid #eaecef; 
            padding-bottom: 0.3em;
            margin-top: 1.5em;
        }
        
        h3 { 
            font-size: 1.25em; 
            margin-top: 1.25em;
        }
        
        h4 { 
            font-size: 1em; 
            margin-top: 1em;
        }
        
        a { 
            color: #0366d6; 
            text-decoration: none; 
        }
        
        a:hover { 
            text-decoration: underline; 
        }
        
        strong { 
            font-weight: 600; 
        }
        
        pre {
            background-color:rgb(9, 7, 10);
            overflow: auto;
            margin: 0;
        }
        
        code {
            font-family: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;
            padding: 0.2em 0.4em;
            font-size: 90%;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }

        .code-block {
            position: relative;
            background-color:rgb(9, 7, 10);
            border-radius: 6px;
            margin: 1em 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 10px;
            background-color:rgb(32, 30, 43);
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
        }

        .language {
            color: #efe9e9;
            font-size: 0.9em;
            font-family: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;
        }

        .copy-button {
            padding: 4px 8px;
            font-size: 0.9em;
            color: #efe9e9;
            background-color: transparent;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-button:hover {
            background-color: #e9e9e9;
            border-color: #ccc;
        }
        
        blockquote {
            margin: 0;
            padding: 0 1em;
            color: #6a737d;
            border-left: 0.25em solid #dfe2e5;
        }
        
        ul, ol {
            padding-left: 2em;
        }
        
        table {
            border-collapse: collapse;
            border-spacing: 0;
            width: 100%;
            overflow: auto;
            margin-bottom: 16px;
        }
        
        table th {
            font-weight: 600;
        }
        
        table th, table td {
            padding: 6px 13px;
            border: 1px solid #dfe2e5;
        }
        
        table tr {
            background-color: #fff;
            border-top: 1px solid #c6cbd1;
        }
        
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
        
        img {
            max-width: 100%;
            box-sizing: content-box;
        }
    </style>
</head>
<body>
    <h1>Documentación Técnica - Petos App</h1>
<hr>
<h2>1. Requisitos Funcionales</h2>
<h3>1.1 Autenticación y Registro</h3>
<ul>
<li><strong>RF-001</strong>: El sistema debe permitir registro de usuarios con email y contraseña</li>
<li><strong>RF-002</strong>: El sistema debe validar la fortaleza de contraseñas (mínimo 8 caracteres, mayúsculas, minúsculas, números)</li>
<li><strong>RF-003</strong>: El sistema debe permitir login con credenciales registradas</li>
<li><strong>RF-004</strong>: El sistema debe mantener sesión activa mediante JWT tokens</li>
<li><strong>RF-005</strong>: El sistema debe permitir recuperación de contraseña vía email</li>
<li><strong>RF-006</strong>: El registro debe incluir proceso de onboarding en múltiples pasos</li>
<li><strong>RF-007</strong>: El usuario debe poder registrar al menos una mascota durante el onboarding</li>
</ul>
<h3>1.2 Gestión de Perfil de Usuario</h3>
<ul>
<li><strong>RF-008</strong>: El usuario debe poder ver y editar su perfil (nombre, apellido, biografía, ubicación)</li>
<li><strong>RF-009</strong>: El usuario debe poder subir y cambiar su foto de perfil (avatar)</li>
<li><strong>RF-010</strong>: El usuario debe poder ver estadísticas de su perfil (publicaciones, seguidores, seguidos)</li>
<li><strong>RF-011</strong>: El usuario debe poder ver el perfil de otros usuarios</li>
<li><strong>RF-012</strong>: El usuario debe poder seguir y dejar de seguir a otros usuarios</li>
<li><strong>RF-013</strong>: El sistema debe mostrar si el usuario está siguiendo a otro usuario</li>
</ul>
<h3>1.3 Gestión de Mascotas</h3>
<ul>
<li><strong>RF-014</strong>: El usuario debe poder crear perfiles de mascotas con datos básicos (nombre, tipo, raza, edad, sexo, biografía)</li>
<li><strong>RF-015</strong>: El usuario debe poder agregar fotos a los perfiles de sus mascotas</li>
<li><strong>RF-016</strong>: El usuario debe poder editar información de sus mascotas</li>
<li><strong>RF-017</strong>: El usuario debe poder eliminar mascotas de su cuenta</li>
<li><strong>RF-018</strong>: El sistema debe permitir múltiples mascotas por usuario</li>
<li><strong>RF-019</strong>: El perfil de mascota debe mostrar galería de fotos</li>
<li><strong>RF-020</strong>: El perfil de mascota debe mostrar publicaciones etiquetadas</li>
</ul>
<h3>1.4 Registros de Salud de Mascotas</h3>
<ul>
<li><strong>RF-021</strong>: El usuario debe poder crear registros de salud para sus mascotas (vacunas, desparasitación, visitas al veterinario)</li>
<li><strong>RF-022</strong>: El usuario debe poder editar registros de salud existentes</li>
<li><strong>RF-023</strong>: El usuario debe poder eliminar registros de salud</li>
<li><strong>RF-024</strong>: El sistema debe permitir activar recordatorios para eventos de salud futuros</li>
<li><strong>RF-025</strong>: El usuario debe poder registrar datos médicos generales de la mascota (alergias, condiciones médicas, veterinario, seguro)</li>
</ul>
<h3>1.5 Publicaciones (Posts)</h3>
<ul>
<li><strong>RF-026</strong>: El usuario debe poder crear publicaciones con texto descriptivo</li>
<li><strong>RF-027</strong>: El usuario debe poder agregar entre 1 y 5 imágenes a una publicación</li>
<li><strong>RF-028</strong>: El usuario debe poder agregar 1 video a una publicación (excluyente con imágenes)</li>
<li><strong>RF-029</strong>: El usuario debe poder etiquetar a sus mascotas en publicaciones</li>
<li><strong>RF-030</strong>: El usuario debe poder dar &quot;me gusta&quot; a publicaciones</li>
<li><strong>RF-031</strong>: El usuario debe poder comentar publicaciones</li>
<li><strong>RF-032</strong>: El usuario debe poder eliminar sus propias publicaciones</li>
<li><strong>RF-033</strong>: El usuario debe poder eliminar comentarios en sus propias publicaciones</li>
<li><strong>RF-034</strong>: El sistema debe mostrar feed con publicaciones de usuarios seguidos</li>
<li><strong>RF-035</strong>: El sistema debe permitir scroll infinito en el feed</li>
</ul>
<h3>1.6 Historias (Stories)</h3>
<ul>
<li><strong>RF-036</strong>: El usuario debe poder crear historias con imagen o video</li>
<li><strong>RF-037</strong>: El usuario debe poder agregar texto y color de fondo a las historias</li>
<li><strong>RF-038</strong>: El usuario debe poder ver historias de usuarios seguidos</li>
<li><strong>RF-039</strong>: Las historias deben tener duración limitada (24 horas)</li>
<li><strong>RF-040</strong>: El usuario debe poder comentar historias</li>
<li><strong>RF-041</strong>: El usuario debe poder dar &quot;me gusta&quot; a historias</li>
<li><strong>RF-042</strong>: El sistema debe mostrar indicador de historias no vistas</li>
</ul>
<h3>1.7 Servicios (Marketplace)</h3>
<ul>
<li><strong>RF-043</strong>: El usuario debe poder crear servicios con información detallada (título, descripción, categoría, precio, ubicación)</li>
<li><strong>RF-044</strong>: El usuario debe poder agregar hasta 5 imágenes a un servicio</li>
<li><strong>RF-045</strong>: El usuario debe poder editar servicios existentes</li>
<li><strong>RF-046</strong>: El usuario debe poder eliminar sus servicios</li>
<li><strong>RF-047</strong>: El sistema debe mostrar servicios en un mapa con marcadores</li>
<li><strong>RF-048</strong>: El usuario debe poder filtrar servicios por categoría, rango de precio y distancia</li>
<li><strong>RF-049</strong>: El usuario debe poder ver detalles completos de un servicio</li>
<li><strong>RF-050</strong>: El sistema debe mostrar información de contacto del proveedor del servicio</li>
</ul>
<h3>1.8 Eventos</h3>
<ul>
<li><strong>RF-051</strong>: El usuario debe poder crear eventos con información detallada (título, descripción, ubicación, fecha y hora)</li>
<li><strong>RF-052</strong>: El usuario debe poder agregar hasta 5 imágenes a un evento</li>
<li><strong>RF-053</strong>: El usuario debe poder editar eventos existentes</li>
<li><strong>RF-054</strong>: El usuario debe poder cancelar eventos</li>
<li><strong>RF-055</strong>: El usuario debe poder eliminar eventos</li>
<li><strong>RF-056</strong>: El sistema debe mostrar eventos en un mapa con marcadores</li>
<li><strong>RF-057</strong>: El usuario debe poder ver detalles completos de un evento</li>
<li><strong>RF-058</strong>: El sistema debe mostrar lista de eventos organizados por el usuario</li>
</ul>
<h3>1.9 Notificaciones</h3>
<ul>
<li><strong>RF-059</strong>: El sistema debe notificar cuando alguien da &quot;me gusta&quot; a una publicación</li>
<li><strong>RF-060</strong>: El sistema debe notificar cuando alguien comenta una publicación</li>
<li><strong>RF-061</strong>: El sistema debe notificar cuando alguien sigue al usuario</li>
<li><strong>RF-062</strong>: El usuario debe poder ver todas sus notificaciones</li>
<li><strong>RF-063</strong>: El usuario debe poder filtrar notificaciones por tipo (todas, no leídas, me gusta, comentarios, seguidores)</li>
<li><strong>RF-064</strong>: El sistema debe marcar notificaciones como leídas automáticamente al abrirlas</li>
</ul>
<h3>1.10 Mensajería (Chat)</h3>
<ul>
<li><strong>RF-065</strong>: El usuario debe poder enviar mensajes directos a otros usuarios</li>
<li><strong>RF-066</strong>: El usuario debe poder ver lista de conversaciones activas</li>
<li><strong>RF-067</strong>: El sistema debe mostrar último mensaje en lista de conversaciones</li>
<li><strong>RF-068</strong>: El sistema debe mostrar estado de lectura de mensajes</li>
<li><strong>RF-069</strong>: El sistema debe ordenar conversaciones por fecha del último mensaje</li>
</ul>
<h3>1.11 Reportes y Moderación</h3>
<ul>
<li><strong>RF-070</strong>: El usuario debe poder reportar publicaciones inapropiadas</li>
<li><strong>RF-071</strong>: El usuario debe poder reportar historias inapropiadas</li>
<li><strong>RF-072</strong>: El sistema debe categorizar reportes (spam, acoso, contenido inapropiado, etc.)</li>
<li><strong>RF-073</strong>: El sistema debe permitir agregar descripción opcional al reporte</li>
</ul>
<h3>1.12 Bloqueo de Usuarios</h3>
<ul>
<li><strong>RF-074</strong>: El usuario debe poder bloquear a otros usuarios</li>
<li><strong>RF-075</strong>: El usuario debe poder ver lista de usuarios bloqueados</li>
<li><strong>RF-076</strong>: El usuario debe poder desbloquear usuarios</li>
<li><strong>RF-077</strong>: El sistema debe ocultar contenido de usuarios bloqueados</li>
</ul>
<h3>1.13 Configuración</h3>
<ul>
<li><strong>RF-078</strong>: El usuario debe poder cambiar su contraseña</li>
<li><strong>RF-079</strong>: El usuario debe poder seleccionar tema de la aplicación (claro, oscuro, automático)</li>
<li><strong>RF-080</strong>: El usuario debe poder cambiar idioma de la aplicación</li>
<li><strong>RF-081</strong>: El usuario debe poder gestionar notificaciones</li>
<li><strong>RF-082</strong>: El usuario debe poder cerrar sesión</li>
<li><strong>RF-083</strong>: El usuario debe poder eliminar su cuenta</li>
</ul>
<h3>1.14 Seguridad</h3>
<ul>
<li><strong>RF-084</strong>: El sistema debe implementar rate limiting por usuario</li>
<li><strong>RF-085</strong>: El sistema debe validar y sanitizar todos los inputs</li>
<li><strong>RF-086</strong>: El sistema debe implementar protección contra ataques comunes (XSS, CSRF, SQL Injection)</li>
<li><strong>RF-087</strong>: El sistema debe registrar actividades importantes en logs de auditoría</li>
<li><strong>RF-088</strong>: El sistema debe encriptar contraseñas con bcrypt</li>
<li><strong>RF-089</strong>: El sistema debe validar tamaño y tipo de archivos subidos</li>
</ul>
<h3>1.15 Multimedia</h3>
<ul>
<li><strong>RF-090</strong>: El sistema debe almacenar imágenes en Cloudinary</li>
<li><strong>RF-091</strong>: El sistema debe generar múltiples tamaños de imágenes (thumbnail, medium, large)</li>
<li><strong>RF-092</strong>: El sistema debe optimizar imágenes automáticamente</li>
<li><strong>RF-093</strong>: El sistema debe soportar videos en publicaciones e historias</li>
<li><strong>RF-094</strong>: El sistema debe validar duración máxima de videos</li>
</ul>
<hr>
<h2>2. Pantallas y Funcionalidades</h2>
<h3>2.1 Pantalla de Inicio de Sesión (LoginView)</h3>
<p><strong>Ruta</strong>: <code>/login</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Campo de entrada para email con validación de formato</li>
<li>Campo de entrada para contraseña con opción de mostrar/ocultar</li>
<li>Botón &quot;Iniciar Sesión&quot; que valida credenciales</li>
<li>Enlace &quot;¿Olvidaste tu contraseña?&quot; para recuperación</li>
<li>Enlace &quot;Crear cuenta&quot; para ir a registro</li>
<li>Validación en tiempo real de campos</li>
<li>Mensajes de error específicos para credenciales incorrectas</li>
<li>Indicador de carga durante autenticación</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Registro (<code>/register</code>)</li>
<li>→ Pantalla de Recuperación de Contraseña (<code>/forgot-password</code>)</li>
<li>→ Pantalla Principal (Home) tras login exitoso</li>
</ul>
<hr>
<h3>2.2 Pantalla de Registro (RegisterView)</h3>
<p><strong>Ruta</strong>: <code>/register</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Formulario multi-paso con progreso visual</li>
<li><strong>Paso 1 - Datos de Usuario</strong>:<ul>
<li>Nombre, apellido, email, contraseña, confirmar contraseña</li>
<li>Validación de fortaleza de contraseña</li>
<li>Validación de coincidencia de contraseñas</li>
</ul>
</li>
<li><strong>Paso 2 - Ubicación</strong>:<ul>
<li>Selector de país, ciudad</li>
<li>Validación de campos requeridos</li>
</ul>
</li>
<li><strong>Paso 3 - Registro de Primera Mascota</strong>:<ul>
<li>Formulario completo de mascota</li>
<li>Obligatorio para completar registro</li>
</ul>
</li>
<li>Botones &quot;Atrás&quot; y &quot;Siguiente&quot; para navegación entre pasos</li>
<li>Indicador de progreso (1/3, 2/3, 3/3)</li>
<li>Validación de todos los campos antes de enviar</li>
<li>Indicador de carga durante registro</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Login (<code>/login</code>) desde enlace &quot;Ya tengo cuenta&quot;</li>
<li>→ Pantalla Principal (Home) tras registro exitoso</li>
</ul>
<hr>
<h3>2.3 Pantalla Principal (HomeView)</h3>
<p><strong>Ruta</strong>: <code>/home</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Barra superior</strong>:<ul>
<li>Logo de Petos</li>
<li>Botón de notificaciones con contador de no leídas</li>
</ul>
</li>
<li><strong>Feed de publicaciones</strong>:<ul>
<li>Lista de publicaciones de usuarios seguidos</li>
<li>Cada publicación muestra:<ul>
<li>Avatar y nombre del autor</li>
<li>Carousel de imágenes (si tiene múltiples)</li>
<li>Video con controles (si es video)</li>
<li>Descripción con &quot;ver más&quot; si es larga</li>
<li>Mascotas etiquetadas (avatares clickeables)</li>
<li>Botones: Me gusta, Comentar, Compartir</li>
<li>Contador de likes y comentarios</li>
<li>Fecha de publicación</li>
</ul>
</li>
<li>Pull-to-refresh para actualizar feed</li>
<li>Scroll infinito con carga automática</li>
<li>Estado vacío con botón &quot;Crear primera publicación&quot;</li>
</ul>
</li>
<li><strong>Botón flotante (+)</strong> para crear nueva publicación</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Crear Publicación (al tocar botón +)</li>
<li>→ Pantalla de Perfil de Usuario (al tocar avatar de autor)</li>
<li>→ Pantalla de Perfil de Mascota (al tocar mascota etiquetada)</li>
<li>→ Modal de Comentarios (al tocar botón comentar)</li>
<li>→ Pantalla de Notificaciones (al tocar campana)</li>
</ul>
<hr>
<h3>2.4 Pantalla de Crear Publicación (CreatePostView)</h3>
<p><strong>Ruta</strong>: <code>/create-post</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Campo de texto para descripción (opcional)</li>
<li>Botón &quot;Agregar medios&quot; para seleccionar imágenes o video</li>
<li><strong>AppMediaPicker</strong>:<ul>
<li>Vista previa de medios seleccionados</li>
<li>Opción de eliminar medios individuales</li>
<li>Reordenar medios arrastrando</li>
<li>Validación: 1-5 imágenes O 1 video (excluyente)</li>
<li>Indicador visual de límites de medios</li>
</ul>
</li>
<li>Selector de mascotas a etiquetar:<ul>
<li>Lista de mascotas del usuario con checkboxes</li>
<li>Búsqueda de mascotas propias</li>
</ul>
</li>
<li>Botón &quot;Publicar&quot; con indicador de carga</li>
<li>Validación: debe haber al menos 1 medio</li>
<li>Mensaje de progreso al subir imágenes</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Volver a Home (botón atrás o tras publicar exitosamente)</li>
</ul>
<hr>
<h3>2.5 Pantalla de Comentarios (PostCommentsModal)</h3>
<p><strong>Tipo</strong>: Modal Bottom Sheet</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Lista de comentarios de la publicación</li>
<li>Cada comentario muestra:<ul>
<li>Avatar y nombre del autor</li>
<li>Texto del comentario</li>
<li>Fecha relativa (hace X minutos/horas/días)</li>
<li>Botón de eliminar (solo si es autor)</li>
</ul>
</li>
<li>Campo de entrada de texto para nuevo comentario</li>
<li>Botón &quot;Enviar&quot; para publicar comentario</li>
<li>Scroll infinito si hay muchos comentarios</li>
<li>Estado vacío &quot;Sin comentarios aún&quot; con mensaje motivador</li>
<li>Actualización en tiempo real al agregar comentario</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cerrar modal (arrastrar hacia abajo o tocar fuera)</li>
</ul>
<hr>
<h3>2.6 Pantalla de Notificaciones (NotificationView)</h3>
<p><strong>Ruta</strong>: <code>/notifications</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Filtros superiores</strong> (tabs):<ul>
<li>Todas</li>
<li>No leídas</li>
<li>Me gusta</li>
<li>Comentarios</li>
<li>Seguidores</li>
</ul>
</li>
<li><strong>Lista de notificaciones</strong>:<ul>
<li>Avatar del usuario que generó la notificación</li>
<li>Icono según tipo (corazón, comentario, usuario)</li>
<li>Texto descriptivo (&quot;X le dio me gusta a tu publicación&quot;)</li>
<li>Fecha relativa</li>
<li>Thumbnail de publicación (si aplica)</li>
<li>Indicador visual de notificación no leída</li>
</ul>
</li>
<li>Pull-to-refresh para actualizar</li>
<li>Marcar como leída automáticamente al abrir</li>
<li>Estado vacío según filtro activo con mensaje personalizado</li>
<li>Botones de acción según contexto</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Publicación (al tocar notificación de like/comentario)</li>
<li>→ Pantalla de Perfil de Usuario (al tocar notificación de seguidor)</li>
<li>← Volver a Home</li>
</ul>
<hr>
<h3>2.7 Pantalla de Historias (StoriesView)</h3>
<p><strong>Ruta</strong>: <code>/stories/:userId</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Vista fullscreen de historia actual</li>
<li><strong>Controles superiores</strong>:<ul>
<li>Avatar y nombre del autor</li>
<li>Indicador de progreso de historias (barras)</li>
<li>Botón de cerrar (X)</li>
<li>Tiempo de publicación</li>
</ul>
</li>
<li><strong>Interacciones</strong>:<ul>
<li>Tap izquierda: historia anterior</li>
<li>Tap derecha: siguiente historia</li>
<li>Mantener presionado: pausar historia</li>
<li>Deslizar abajo: cerrar</li>
</ul>
</li>
<li>Reproducción automática con timer</li>
<li><strong>Barra inferior</strong> (si es historia propia):<ul>
<li>Contador de vistas</li>
</ul>
</li>
<li><strong>Barra inferior</strong> (si es de otro usuario):<ul>
<li>Campo para enviar mensaje</li>
<li>Botón de me gusta</li>
</ul>
</li>
<li>Indicador de carga entre historias</li>
<li>Estado vacío &quot;Este usuario no tiene historias&quot;</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Siguiente historia del mismo usuario</li>
<li>→ Historias del siguiente usuario (cuando termina las del actual)</li>
<li>← Cerrar y volver a pantalla anterior</li>
</ul>
<hr>
<h3>2.8 Pantalla de Crear Historia (CreateStoryView)</h3>
<p><strong>Ruta</strong>: <code>/create-story</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Vista previa fullscreen del medio seleccionado (imagen o video)</li>
<li><strong>Editor de texto</strong>:<ul>
<li>Campo de texto para agregar mensaje</li>
<li>Selector de color de fondo del texto</li>
<li>Posicionamiento libre del texto (arrastrable)</li>
<li>Ajuste de tamaño del texto</li>
</ul>
</li>
<li><strong>Opciones superiores</strong>:<ul>
<li>Botón &quot;Cambiar medio&quot; para seleccionar otra imagen/video</li>
<li>Botón &quot;Color de fondo&quot; para toda la historia</li>
</ul>
</li>
<li>Botón &quot;Publicar historia&quot; con indicador de carga</li>
<li>Validación: debe tener imagen o video</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cancelar y volver</li>
<li>→ Volver a Home tras publicar exitosamente</li>
</ul>
<hr>
<h3>2.9 Pantalla de Explorar (ExploreView)</h3>
<p><strong>Ruta</strong>: <code>/explore</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Tab &quot;Comunidad&quot;</strong>:<ul>
<li>Grid de publicaciones populares</li>
<li>Preview con imagen principal</li>
<li>Indicador de múltiples fotos</li>
<li>Contador de likes</li>
</ul>
</li>
<li><strong>Tab &quot;Mascotas&quot;</strong>:<ul>
<li>Swipeable cards estilo Tinder</li>
<li>Cada card muestra:<ul>
<li>Fotos de la mascota (carousel)</li>
<li>Nombre, edad, sexo, raza</li>
<li>Ubicación del dueño</li>
<li>Descripción/biografía</li>
</ul>
</li>
<li>Botones: ❌ (Rechazar) y ❤️ (Like)</li>
<li>Animaciones al hacer swipe</li>
<li>Indicador de match cuando hay like mutuo</li>
<li>Estado vacío &quot;No hay más mascotas por ahora&quot;</li>
</ul>
</li>
<li>Pull-to-refresh en ambos tabs</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Detalle de Publicación (al tocar post en Comunidad)</li>
<li>→ Pantalla de Perfil de Mascota (al tocar info en card)</li>
<li>→ Modal de Match (cuando hay match mutuo)</li>
</ul>
<hr>
<h3>2.10 Pantalla de Mapa (MapView)</h3>
<p><strong>Ruta</strong>: <code>/map</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Tabs superiores</strong>:<ul>
<li>Servicios</li>
<li>Eventos</li>
</ul>
</li>
<li><strong>Mapa interactivo</strong>:<ul>
<li>Marcadores personalizados según categoría</li>
<li>Clustered markers cuando hay muchos cercanos</li>
<li>Marcador de ubicación del usuario</li>
<li>Controles de zoom</li>
<li>Botón para centrar en ubicación actual</li>
</ul>
</li>
<li><strong>Panel inferior de filtros</strong> (Servicios):<ul>
<li>Filtro por categoría (Veterinaria, Grooming, Hotel, Guardería, etc.)</li>
<li>Filtro por rango de precio (min-max)</li>
<li>Filtro por distancia (radio en km)</li>
<li>Botón &quot;Aplicar filtros&quot;</li>
<li>Contador de servicios encontrados</li>
</ul>
</li>
<li><strong>Panel inferior de filtros</strong> (Eventos):<ul>
<li>Filtro por rango de fechas</li>
<li>Filtro por distancia</li>
<li>Botón &quot;Aplicar filtros&quot;</li>
<li>Contador de eventos encontrados</li>
</ul>
</li>
<li><strong>Tap en marcador</strong>:<ul>
<li>Muestra card de preview con info básica</li>
<li>Botón &quot;Ver detalles&quot; para abrir modal completo</li>
</ul>
</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Modal de Detalle de Servicio (al tocar &quot;Ver detalles&quot; en servicio)</li>
<li>→ Modal de Detalle de Evento (al tocar &quot;Ver detalles&quot; en evento)</li>
<li>→ Pantalla de Crear Servicio (botón +)</li>
<li>→ Pantalla de Crear Evento (botón +)</li>
</ul>
<hr>
<h3>2.11 Pantalla de Crear/Editar Servicio (CreateServiceView)</h3>
<p><strong>Ruta</strong>: <code>/create-service</code> o <code>/edit-service/:id</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Formulario con campos</strong>:<ul>
<li>Título (requerido)</li>
<li>Descripción (requerido)</li>
<li>Categoría (dropdown: Veterinaria, Grooming, Hotel, Guardería, etc.)</li>
<li>Precio (numérico)</li>
<li>Ubicación (texto descriptivo)</li>
<li>Latitud y Longitud (numéricos, opcional con botón &quot;Usar mi ubicación&quot;)</li>
<li>Teléfono de contacto</li>
<li>Email de contacto</li>
</ul>
</li>
<li><strong>AppMediaPicker para imágenes</strong> (hasta 5):<ul>
<li>En modo edición, muestra imágenes existentes como URLs</li>
<li>Permite agregar nuevas imágenes locales</li>
<li>Permite eliminar imágenes (URLs o locales)</li>
<li>Vista previa de todas las imágenes</li>
</ul>
</li>
<li>Validación de todos los campos requeridos</li>
<li>Botón &quot;Guardar&quot; con indicador de carga</li>
<li><strong>Proceso de guardado/actualización</strong>:<ul>
<li>Detecta imágenes eliminadas y las borra del backend</li>
<li>Sube nuevas imágenes a Cloudinary con delays (500ms entre cada una)</li>
<li>Actualiza servicio con nuevos datos</li>
<li>Agrega imágenes recién subidas una por una</li>
</ul>
</li>
<li>Mensajes de éxito/error con SnackBar</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cancelar y volver al mapa</li>
<li>→ Volver al mapa tras guardar exitosamente</li>
</ul>
<hr>
<h3>2.12 Pantalla de Crear/Editar Evento (CreateEventView)</h3>
<p><strong>Ruta</strong>: <code>/create-event</code> o <code>/edit-event/:id</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Formulario con campos</strong>:<ul>
<li>Título (requerido)</li>
<li>Descripción (requerido)</li>
<li>Ubicación (texto descriptivo, requerido)</li>
<li>Latitud y Longitud (numéricos, opcional con botón &quot;Usar mi ubicación&quot;)</li>
<li>Fecha (selector de fecha)</li>
<li>Hora (selector de hora)</li>
<li>Capacidad máxima (numérico, opcional)</li>
</ul>
</li>
<li><strong>AppMediaPicker para imágenes</strong> (hasta 5):<ul>
<li>En modo edición, muestra imágenes existentes como URLs</li>
<li>Permite agregar nuevas imágenes locales</li>
<li>Permite eliminar imágenes</li>
<li>Vista previa de todas las imágenes</li>
</ul>
</li>
<li>Validación de todos los campos requeridos</li>
<li>Validación: fecha debe ser futura</li>
<li>Botón &quot;Guardar Evento&quot; con indicador de carga</li>
<li><strong>Proceso de guardado/actualización</strong> (idéntico a servicios):<ul>
<li>Detecta y elimina imágenes removidas</li>
<li>Sube nuevas imágenes con delays anti-rate-limit</li>
<li>Actualiza evento sin imágenes</li>
<li>Agrega imágenes una por una</li>
</ul>
</li>
<li>Mensajes de éxito/error</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cancelar y volver al mapa</li>
<li>→ Volver al mapa tras guardar exitosamente</li>
</ul>
<hr>
<h3>2.13 Pantalla de Perfil de Usuario (UserProfileView)</h3>
<p><strong>Ruta</strong>: <code>/profile/:userId</code> (o <code>/profile</code> para perfil propio)</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Header del perfil</strong>:<ul>
<li>Avatar del usuario</li>
<li>Nombre completo</li>
<li>Username</li>
<li>Biografía</li>
<li>Ubicación</li>
<li>Estadísticas: # Publicaciones, # Seguidores, # Seguidos</li>
<li>Botón &quot;Seguir&quot;/&quot;Siguiendo&quot; (si es otro usuario)</li>
<li>Botón &quot;Editar perfil&quot; (si es perfil propio)</li>
<li>Botón &quot;Mensaje&quot; (si es otro usuario)</li>
<li>Botón de opciones (⋮) con menú:<ul>
<li>Reportar usuario</li>
<li>Bloquear usuario</li>
</ul>
</li>
</ul>
</li>
<li><strong>Tabs de contenido</strong>:<ul>
<li><strong>Posts</strong>: Grid de publicaciones del usuario</li>
<li><strong>Tagged</strong>: Publicaciones donde está etiquetado</li>
<li><strong>Likes</strong>: Publicaciones que le gustaron (solo perfil propio)</li>
</ul>
</li>
<li>Pull-to-refresh en todos los tabs</li>
<li>Estados vacíos según tab:<ul>
<li>&quot;Sin publicaciones aún&quot;</li>
<li>&quot;No hay publicaciones etiquetadas&quot;</li>
<li>&quot;No hay publicaciones con me gusta&quot;</li>
</ul>
</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Editar Perfil (al tocar &quot;Editar perfil&quot;)</li>
<li>→ Pantalla de Detalle de Publicación (al tocar publicación)</li>
<li>→ Pantalla de Seguidores (al tocar &quot;# Seguidores&quot;)</li>
<li>→ Pantalla de Seguidos (al tocar &quot;# Seguidos&quot;)</li>
<li>→ Pantalla de Chat (al tocar &quot;Mensaje&quot;)</li>
<li>← Volver atrás</li>
</ul>
<hr>
<h3>2.14 Pantalla de Editar Perfil (EditProfileView)</h3>
<p><strong>Ruta</strong>: Desde UserProfileView (modal o pantalla)</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>AvatarPicker</strong>:<ul>
<li>Muestra avatar actual (URL remota)</li>
<li>Permite cambiar avatar (File local)</li>
<li>Botón de cámara overlay para cambiar</li>
<li>Preview en tiempo real</li>
</ul>
</li>
<li><strong>Formulario con campos</strong>:<ul>
<li>Nombre (requerido)</li>
<li>Apellido (requerido)</li>
<li>Biografía (opcional, máximo 150 caracteres)</li>
<li>País (dropdown)</li>
<li>Ciudad (texto)</li>
<li>Fecha de nacimiento (selector de fecha)</li>
</ul>
</li>
<li>Validación de campos requeridos</li>
<li>Botón &quot;Guardar cambios&quot; con indicador de carga</li>
<li>Botón &quot;Cancelar&quot; para descartar cambios</li>
<li>Confirmación si hay cambios sin guardar</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cancelar y volver a perfil</li>
<li>→ Volver a perfil tras guardar exitosamente</li>
</ul>
<hr>
<h3>2.15 Pantalla de Gestión de Mascotas (PetManagementView)</h3>
<p><strong>Ruta</strong>: <code>/pets</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Lista de mascotas del usuario</li>
<li><strong>Card de cada mascota</strong>:<ul>
<li>Avatar de la mascota</li>
<li>Nombre, tipo, raza</li>
<li>Edad</li>
<li>Botón &quot;Ver perfil&quot;</li>
<li>Botón &quot;Editar&quot;</li>
<li>Botón &quot;Eliminar&quot; con confirmación</li>
</ul>
</li>
<li>Botón flotante (+) para agregar nueva mascota</li>
<li>Estado vacío &quot;Sin mascotas&quot; con botón &quot;Agregar Mascota&quot;</li>
<li>Pull-to-refresh para actualizar lista</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Modal de Agregar Mascota (al tocar botón +)</li>
<li>→ Modal de Editar Mascota (al tocar botón editar)</li>
<li>→ Pantalla de Perfil de Mascota (al tocar &quot;Ver perfil&quot;)</li>
</ul>
<hr>
<h3>2.16 Modal de Agregar/Editar Mascota (PetFormDialog)</h3>
<p><strong>Tipo</strong>: Dialog Modal</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>AvatarPicker</strong>:<ul>
<li>Recorte de imagen en formato 1:1</li>
<li>Preview en tiempo real</li>
<li>Placeholder con icono de mascota</li>
</ul>
</li>
<li><strong>Formulario con campos</strong>:<ul>
<li>Nombre (requerido)</li>
<li>Tipo (dropdown: Perro, Gato, Otro)</li>
<li>Raza (dropdown dinámico según tipo seleccionado)</li>
<li>Fecha de nacimiento (selector de fecha)</li>
<li>Sexo (radio buttons: Macho, Hembra)</li>
<li>Biografía (textarea, opcional)</li>
<li>Peso (numérico con unidad kg)</li>
</ul>
</li>
<li><strong>Selector de rasgos/características</strong>:<ul>
<li>Chips de rasgos disponibles según tipo de mascota</li>
<li>Multi-selección de rasgos</li>
<li>Colores, tamaños, temperamento, etc.</li>
</ul>
</li>
<li>Validación ReactiveForm con revalidación en submit</li>
<li>Autovalidación de campos al tocar</li>
<li>Botón &quot;Cancelar&quot; (outline)</li>
<li>Botón &quot;Guardar&quot; (primary) con indicador de carga</li>
<li>Scroll interno para formularios largos</li>
<li><strong>Manejo de imágenes</strong>:<ul>
<li>En edición: muestra URL existente si hay</li>
<li>Al guardar sin cambiar imagen: mantiene imagen actual (no la borra)</li>
<li>Al cambiar imagen: sube nueva y actualiza</li>
</ul>
</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cerrar modal (cancelar)</li>
<li>→ Cerrar y actualizar lista tras guardar exitosamente</li>
</ul>
<hr>
<h3>2.17 Pantalla de Perfil de Mascota (PetProfileView)</h3>
<p><strong>Ruta</strong>: <code>/pet/:petId</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Header del perfil</strong>:<ul>
<li>Avatar de la mascota (grande)</li>
<li>Nombre, tipo, raza</li>
<li>Edad</li>
<li>Sexo (icono)</li>
<li>Peso</li>
<li>Biografía</li>
<li>Chips de rasgos/características</li>
<li>Botón &quot;Editar&quot; (si es mascota propia)</li>
<li>Estadísticas: # Fotos, # Posts etiquetados</li>
</ul>
</li>
<li><strong>Tabs de contenido</strong>:<ul>
<li><strong>Fotos</strong>: Grid de galería de fotos de la mascota</li>
<li><strong>Posts</strong>: Publicaciones donde está etiquetada</li>
<li><strong>Salud</strong>: Registros de salud y datos médicos</li>
</ul>
</li>
<li><strong>Tab Fotos</strong>:<ul>
<li>Grid 3 columnas con fotos</li>
<li>Botón flotante (+) para agregar foto</li>
<li>Estado vacío &quot;Sin fotos aún&quot;</li>
<li>Tap en foto abre visor fullscreen con opciones</li>
</ul>
</li>
<li><strong>Tab Posts</strong>:<ul>
<li>Grid de publicaciones etiquetadas</li>
<li>Estado vacío &quot;Sin publicaciones aún&quot;</li>
</ul>
</li>
<li><strong>Tab Salud</strong> (solo mascota propia):<ul>
<li><strong>Sección &quot;Datos Médicos&quot;</strong>:<ul>
<li>Card con info: Alergias, Condiciones médicas, Veterinario, Seguro</li>
<li>Botón &quot;Editar&quot; para abrir modal</li>
<li>Estado vacío con botón &quot;Agregar datos&quot;</li>
</ul>
</li>
<li><strong>Sección &quot;Registros de Salud&quot;</strong>:<ul>
<li>Lista cronológica de registros (vacunas, desparasitación, visitas)</li>
<li>Card por registro con: Tipo, fecha, notas, recordatorio</li>
<li>Botón &quot;Editar&quot; y &quot;Eliminar&quot; en cada registro</li>
<li>Botón flotante (+) para nuevo registro</li>
<li>Estado vacío &quot;Sin registros aún&quot;</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Modal de Editar Mascota (al tocar &quot;Editar&quot; en header)</li>
<li>→ Modal de Agregar Foto (al tocar + en tab Fotos)</li>
<li>→ Visor de Foto Fullscreen (al tocar foto)</li>
<li>→ Detalle de Publicación (al tocar post en tab Posts)</li>
<li>→ Modal de Editar Datos Médicos (al tocar &quot;Editar&quot; en datos médicos)</li>
<li>→ Modal de Agregar Registro de Salud (al tocar + en registros)</li>
<li>→ Modal de Editar Registro de Salud (al tocar &quot;Editar&quot; en registro)</li>
<li>← Volver atrás</li>
</ul>
<hr>
<h3>2.18 Modal de Datos Médicos (EditHealthInfoDialog)</h3>
<p><strong>Tipo</strong>: Dialog Modal</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Formulario con campos</strong>:<ul>
<li>Alergias (textarea, opcional)</li>
<li>Condiciones médicas (textarea, opcional)</li>
<li>Veterinario (texto, opcional)</li>
<li>Seguro (texto, opcional)</li>
</ul>
</li>
<li>Scroll interno</li>
<li>Botón &quot;Cancelar&quot;</li>
<li>Botón &quot;Guardar&quot; con indicador de carga</li>
<li>Validación ReactiveForm con revalidación</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cerrar modal</li>
<li>→ Cerrar y actualizar tras guardar</li>
</ul>
<hr>
<h3>2.19 Modal de Agregar Registro de Salud (AddHealthLogDialog)</h3>
<p><strong>Tipo</strong>: Dialog Modal</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Formulario con campos</strong>:<ul>
<li>Tipo de evento (dropdown: Vacuna, Desparasitación, Visita al Veterinario, Otro)</li>
<li>Fecha (selector de fecha, default hoy)</li>
<li>Notas (textarea, opcional)</li>
<li><strong>Switch &quot;Activar recordatorio&quot;</strong>:<ul>
<li>Al activar, muestra campo de fecha futura</li>
<li>Fecha de recordatorio (selector, debe ser futura)</li>
</ul>
</li>
</ul>
</li>
<li>Validación: fecha no puede ser futura (para registro), fecha de recordatorio debe ser futura</li>
<li>Botón &quot;Cancelar&quot;</li>
<li>Botón &quot;Guardar&quot; con indicador de carga</li>
<li>Validación ReactiveForm</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cerrar modal</li>
<li>→ Cerrar y actualizar lista tras guardar</li>
</ul>
<hr>
<h3>2.20 Modal de Editar Registro de Salud (EditHealthLogDialog)</h3>
<p><strong>Tipo</strong>: Dialog Modal</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Igual que AddHealthLogDialog pero con datos precargados</li>
<li>Campos editables:<ul>
<li>Tipo de evento</li>
<li>Fecha</li>
<li>Notas</li>
<li>Activar/desactivar recordatorio</li>
<li>Fecha de recordatorio (si está activado)</li>
</ul>
</li>
<li>Validación ReactiveForm con revalidación</li>
<li>Botón &quot;Cancelar&quot;</li>
<li>Botón &quot;Guardar cambios&quot; con indicador de carga</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Cerrar modal</li>
<li>→ Cerrar y actualizar tras guardar</li>
</ul>
<hr>
<h3>2.21 Pantalla de Chat/Mensajería (ChatsView)</h3>
<p><strong>Ruta</strong>: <code>/chats</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Lista de conversaciones activas</li>
<li><strong>Card de cada conversación</strong>:<ul>
<li>Avatar del otro usuario</li>
<li>Nombre del usuario</li>
<li>Último mensaje (preview)</li>
<li>Fecha/hora del último mensaje</li>
<li>Indicador de no leído (badge con contador)</li>
<li>Estado online/offline del usuario</li>
</ul>
</li>
<li>Búsqueda de conversaciones</li>
<li>Pull-to-refresh para actualizar</li>
<li>Estado vacío &quot;No hay conversaciones&quot; con sugerencia de explorar comunidad</li>
<li>Ordenamiento por fecha del último mensaje (más reciente arriba)</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Conversación (al tocar conversación)</li>
<li>← Volver atrás</li>
</ul>
<hr>
<h3>2.22 Pantalla de Conversación (ChatPage)</h3>
<p><strong>Ruta</strong>: <code>/chat/:userId</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Header</strong>:<ul>
<li>Avatar del otro usuario</li>
<li>Nombre del usuario</li>
<li>Estado online/offline</li>
<li>Botón de opciones (⋮) con menú:<ul>
<li>Ver perfil</li>
<li>Bloquear usuario</li>
</ul>
</li>
</ul>
</li>
<li><strong>Lista de mensajes</strong>:<ul>
<li>Mensajes agrupados por fecha</li>
<li>Cada mensaje muestra:<ul>
<li>Avatar (si es del otro usuario)</li>
<li>Texto del mensaje</li>
<li>Hora de envío</li>
<li>Estado de lectura (✓✓ azul si leído, ✓✓ gris si entregado)</li>
</ul>
</li>
<li>Mensajes propios alineados a la derecha (color primario)</li>
<li>Mensajes del otro alineados a la izquierda (gris)</li>
<li>Scroll automático al último mensaje</li>
<li>Estado vacío &quot;Sin mensajes aún&quot; con sugerencia de enviar primer mensaje</li>
</ul>
</li>
<li><strong>Barra inferior</strong>:<ul>
<li>Campo de texto para escribir mensaje</li>
<li>Botón de enviar (deshabilitado si texto vacío)</li>
<li>Indicador &quot;Escribiendo...&quot; cuando el otro usuario está escribiendo</li>
</ul>
</li>
<li>Actualización en tiempo real de mensajes</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Perfil de Usuario (al tocar &quot;Ver perfil&quot;)</li>
<li>← Volver a lista de conversaciones</li>
</ul>
<hr>
<h3>2.23 Pantalla de Configuración (SettingsView)</h3>
<p><strong>Ruta</strong>: <code>/settings</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li><strong>Sección &quot;Cuenta&quot;</strong>:<ul>
<li>Cambiar contraseña</li>
<li>Idioma (Español, English)</li>
<li>Eliminar cuenta (con confirmación)</li>
</ul>
</li>
<li><strong>Sección &quot;Privacidad&quot;</strong>:<ul>
<li>Usuarios bloqueados (con contador)</li>
<li>Perfil público/privado (switch)</li>
<li>Quien puede ver mis historias (dropdown: Todos, Solo seguidores)</li>
<li>Quien puede comentar mis posts (dropdown: Todos, Solo seguidores, Nadie)</li>
</ul>
</li>
<li><strong>Sección &quot;Notificaciones&quot;</strong>:<ul>
<li>Push notifications (switch)</li>
<li>Notificaciones de likes (switch)</li>
<li>Notificaciones de comentarios (switch)</li>
<li>Notificaciones de nuevos seguidores (switch)</li>
<li>Notificaciones de mensajes (switch)</li>
</ul>
</li>
<li><strong>Sección &quot;Apariencia&quot;</strong>:<ul>
<li>Tema (dropdown: Claro, Oscuro, Automático)</li>
</ul>
</li>
<li><strong>Sección &quot;Soporte&quot;</strong>:<ul>
<li>Centro de ayuda</li>
<li>Reportar un problema</li>
<li>Términos y condiciones</li>
<li>Política de privacidad</li>
</ul>
</li>
<li><strong>Acción destructiva</strong>:<ul>
<li>Cerrar sesión (con confirmación)</li>
</ul>
</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>→ Pantalla de Cambiar Contraseña</li>
<li>→ Pantalla de Usuarios Bloqueados</li>
<li>→ Pantalla de Centro de Ayuda</li>
<li>→ Pantalla de Reportar Problema</li>
<li>→ Pantalla de Login (tras cerrar sesión)</li>
<li>← Volver atrás</li>
</ul>
<hr>
<h3>2.24 Pantalla de Usuarios Bloqueados (BlockedUsersView)</h3>
<p><strong>Ruta</strong>: <code>/settings/blocked-users</code></p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>Lista de usuarios bloqueados</li>
<li><strong>Card de cada usuario</strong>:<ul>
<li>Avatar del usuario</li>
<li>Nombre del usuario</li>
<li>Botón &quot;Desbloquear&quot;</li>
</ul>
</li>
<li>Confirmación antes de desbloquear</li>
<li>Estado vacío &quot;No has bloqueado a nadie&quot;</li>
<li>Pull-to-refresh para actualizar</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>← Volver a configuración</li>
</ul>
<hr>
<h3>2.25 Bottom Navigation Bar (Todas las pantallas principales)</h3>
<p><strong>Presente en</strong>: Home, Explore, Map, Chats, Profile</p>
<p><strong>Funcionalidades</strong>:</p>
<ul>
<li>5 tabs con iconos y labels:<ol>
<li><strong>Inicio</strong> (Home): Icono casa</li>
<li><strong>Explorar</strong> (Explore): Icono lupa/brújula</li>
<li><strong>Mapa</strong> (Map): Icono mapa/pin</li>
<li><strong>Chats</strong> (Chats): Icono mensaje con badge contador</li>
<li><strong>Perfil</strong> (Profile): Avatar del usuario</li>
</ol>
</li>
<li>Indicador visual del tab activo (color primario)</li>
<li>Animación de transición entre tabs</li>
<li>Badge de notificaciones en Chats si hay mensajes no leídos</li>
</ul>
<p><strong>Navegación</strong>:</p>
<ul>
<li>Permite cambiar entre las 5 pantallas principales</li>
<li>Mantiene estado de cada pantalla al cambiar tabs</li>
</ul>
<hr>
<h2>3. Flujo de Navegación de la Aplicación</h2>
<h3>3.1 Flujo de Autenticación</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Splash Screen]
     |
     ├─→ (No autenticado) → [Login]
     |                         |
     |                         ├─→ &quot;Crear cuenta&quot; → [Registro Multi-paso]
     |                         |                         |
     |                         |                         ├─→ Paso 1: Datos Usuario
     |                         |                         ├─→ Paso 2: Ubicación
     |                         |                         └─→ Paso 3: Primera Mascota
     |                         |                                   |
     |                         |                                   └─→ [Home Feed]
     |                         |
     |                         └─→ &quot;¿Olvidaste contraseña?&quot; → [Recuperar Contraseña]
     |                                                              |
     |                                                              └─→ [Login]
     |
     └─→ (Autenticado) → [Home Feed]</code></pre>
                </div>
            <h3>3.2 Flujo Principal (Bottom Navigation)</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Bottom Navigation Bar]
     |
     ├─→ Tab &quot;Inicio&quot; → [Home Feed]
     |                      |
     |                      ├─→ Botón (+) → [Crear Publicación] → [Home Feed]
     |                      ├─→ Tap Avatar → [Perfil de Usuario]
     |                      ├─→ Tap Comentar → [Modal Comentarios]
     |                      ├─→ Tap Notificaciones → [Notificaciones]
     |                      └─→ Tap Mascota Etiquetada → [Perfil de Mascota]
     |
     ├─→ Tab &quot;Explorar&quot; → [Explorar]
     |                        |
     |                        ├─→ Sub-tab &quot;Comunidad&quot; → Grid Publicaciones
     |                        |                              |
     |                        |                              └─→ Tap Post → [Detalle Publicación]
     |                        |
     |                        └─→ Sub-tab &quot;Mascotas&quot; → Swipeable Cards
     |                                                      |
     |                                                      ├─→ Swipe Right (❤️) → Match → [Modal Match]
     |                                                      └─→ Tap Info → [Perfil de Mascota]
     |
     ├─→ Tab &quot;Mapa&quot; → [Mapa con Marcadores]
     |                    |
     |                    ├─→ Sub-tab &quot;Servicios&quot; → [Mapa de Servicios]
     |                    |                              |
     |                    |                              ├─→ Tap Marcador → Preview → [Detalle Servicio]
     |                    |                              └─→ Botón (+) → [Crear Servicio]
     |                    |                                                    |
     |                    |                                                    └─→ [Mapa]
     |                    |
     |                    └─→ Sub-tab &quot;Eventos&quot; → [Mapa de Eventos]
     |                                                |
     |                                                ├─→ Tap Marcador → Preview → [Detalle Evento]
     |                                                └─→ Botón (+) → [Crear Evento]
     |                                                                    |
     |                                                                    └─→ [Mapa]
     |
     ├─→ Tab &quot;Chats&quot; → [Lista de Conversaciones]
     |                      |
     |                      └─→ Tap Conversación → [Chat con Usuario]
     |                                                   |
     |                                                   └─→ &quot;Ver perfil&quot; → [Perfil de Usuario]
     |
     └─→ Tab &quot;Perfil&quot; → [Perfil Propio]
                            |
                            ├─→ &quot;Editar perfil&quot; → [Editar Perfil]
                            |                          |
                            |                          └─→ [Perfil Propio]
                            |
                            ├─→ Tab &quot;Posts&quot; → Grid Publicaciones
                            ├─→ Tab &quot;Tagged&quot; → Grid Publicaciones Etiquetadas
                            ├─→ Tab &quot;Likes&quot; → Grid Publicaciones con Me Gusta
                            |
                            ├─→ Menú (⋮) → Opciones
                            |                  |
                            |                  ├─→ &quot;Mis Mascotas&quot; → [Gestión de Mascotas]
                            |                  ├─→ &quot;Configuración&quot; → [Configuración]
                            |                  └─→ &quot;Cerrar sesión&quot; → [Login]
                            |
                            └─→ Tap # Seguidores/Seguidos → [Lista Seguidores/Seguidos]</code></pre>
                </div>
            <h3>3.3 Flujo de Gestión de Mascotas</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Gestión de Mascotas]
     |
     ├─→ Botón (+) → [Modal Agregar Mascota]
     |                    |
     |                    ├─→ &quot;Cancelar&quot; → [Gestión de Mascotas]
     |                    └─→ &quot;Guardar&quot; → [Gestión de Mascotas] (actualizada)
     |
     ├─→ &quot;Ver perfil&quot; → [Perfil de Mascota]
     |                       |
     |                       ├─→ &quot;Editar&quot; (header) → [Modal Editar Mascota]
     |                       |                            |
     |                       |                            └─→ [Perfil de Mascota] (actualizado)
     |                       |
     |                       ├─→ Tab &quot;Fotos&quot;
     |                       |       |
     |                       |       ├─→ Botón (+) → [Agregar Foto] → [Perfil Mascota]
     |                       |       └─→ Tap Foto → [Visor Fullscreen]
     |                       |
     |                       ├─→ Tab &quot;Posts&quot; → Grid Publicaciones
     |                       |
     |                       └─→ Tab &quot;Salud&quot; (solo mascota propia)
     |                               |
     |                               ├─→ Sección &quot;Datos Médicos&quot;
     |                               |       |
     |                               |       ├─→ &quot;Agregar datos&quot; → [Modal Datos Médicos]
     |                               |       └─→ &quot;Editar&quot; → [Modal Datos Médicos]
     |                               |
     |                               └─→ Sección &quot;Registros de Salud&quot;
     |                                       |
     |                                       ├─→ Botón (+) → [Modal Agregar Registro]
     |                                       |                    |
     |                                       |                    └─→ [Perfil Mascota]
     |                                       |
     |                                       └─→ &quot;Editar&quot; → [Modal Editar Registro]
     |                                                           |
     |                                                           └─→ [Perfil Mascota]
     |
     └─→ &quot;Editar&quot; (en card) → [Modal Editar Mascota]
                                   |
                                   └─→ [Gestión de Mascotas] (actualizada)</code></pre>
                </div>
            <h3>3.4 Flujo de Historias (Stories)</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Home Feed - Barra de Historias]
     |
     ├─→ Tap &quot;Tu historia&quot; → [Crear Historia]
     |                            |
     |                            ├─→ Seleccionar Foto/Video → Editor
     |                            ├─→ Agregar Texto, Color
     |                            └─→ &quot;Publicar&quot; → [Home Feed]
     |
     └─→ Tap Historia de Usuario → [Visor de Historias]
                                        |
                                        ├─→ Tap Derecha → Siguiente Historia (mismo usuario)
                                        ├─→ Tap Izquierda → Historia Anterior
                                        ├─→ Mantener Tap → Pausar
                                        ├─→ Swipe Abajo → Cerrar → [Home Feed]
                                        ├─→ Campo Mensaje → Enviar → [Chat con Usuario]
                                        └─→ Auto-avance → Historias del Siguiente Usuario
                                                               |
                                                               └─→ (sin más historias) → [Home Feed]</code></pre>
                </div>
            <h3>3.5 Flujo de Configuración</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Perfil Propio]
     |
     └─→ Menú (⋮) → &quot;Configuración&quot; → [Configuración]
                                           |
                                           ├─→ &quot;Cambiar contraseña&quot; → [Cambiar Contraseña]
                                           |                                |
                                           |                                └─→ [Configuración]
                                           |
                                           ├─→ &quot;Usuarios bloqueados&quot; → [Lista Usuarios Bloqueados]
                                           |                                    |
                                           |                                    └─→ &quot;Desbloquear&quot; → [Lista Usuarios Bloqueados]
                                           |
                                           ├─→ &quot;Idioma&quot; → Selector → [Configuración]
                                           ├─→ &quot;Tema&quot; → Selector → [Configuración]
                                           |
                                           ├─→ &quot;Centro de ayuda&quot; → [Centro de Ayuda]
                                           ├─→ &quot;Reportar problema&quot; → [Reportar Problema]
                                           |
                                           ├─→ &quot;Eliminar cuenta&quot; → Confirmación
                                           |                             |
                                           |                             └─→ (confirmado) → [Login]
                                           |
                                           └─→ &quot;Cerrar sesión&quot; → Confirmación
                                                                      |
                                                                      └─→ (confirmado) → [Login]</code></pre>
                </div>
            <h3>3.6 Flujo de Notificaciones</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Home Feed]
     |
     └─→ Tap Campana → [Notificaciones]
                            |
                            ├─→ Filtros: Todas | No leídas | Me gusta | Comentarios | Seguidores
                            |
                            ├─→ Tap Notificación de Like
                            |       |
                            |       └─→ [Detalle de Publicación]
                            |
                            ├─→ Tap Notificación de Comentario
                            |       |
                            |       └─→ [Detalle de Publicación] → [Modal Comentarios]
                            |
                            └─→ Tap Notificación de Seguidor
                                    |
                                    └─→ [Perfil del Usuario que siguió]</code></pre>
                </div>
            <h3>3.7 Flujo de Crear Publicación</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Home Feed]
     |
     └─→ Botón Flotante (+) → [Crear Publicación]
                                    |
                                    ├─→ &quot;Agregar medios&quot; → Bottom Sheet
                                    |                           |
                                    |                           ├─→ &quot;Tomar Foto&quot; → Cámara → Preview
                                    |                           └─→ &quot;Galería&quot; → Selector → Preview
                                    |
                                    ├─→ Seleccionar 1-5 Fotos (validación)
                                    ├─→ O Seleccionar 1 Video (excluyente)
                                    |
                                    ├─→ Escribir descripción (opcional)
                                    |
                                    ├─→ Selector de Mascotas → Lista Checkboxes
                                    |
                                    ├─→ &quot;Cancelar&quot; → Confirmación → [Home Feed]
                                    |
                                    └─→ &quot;Publicar&quot; → Validación
                                                        |
                                                        ├─→ (sin medios) → Error
                                                        └─→ (válido) → Subir → [Home Feed] (actualizado)</code></pre>
                </div>
            <h3>3.8 Flujo de Perfil de Otro Usuario</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">[Home Feed o Explorar]
     |
     └─→ Tap Avatar/Nombre → [Perfil de Otro Usuario]
                                   |
                                   ├─→ &quot;Seguir&quot;/&quot;Dejar de seguir&quot; → Actualiza estado
                                   |
                                   ├─→ &quot;Mensaje&quot; → [Chat con Usuario]
                                   |
                                   ├─→ Menú (⋮)
                                   |       |
                                   |       ├─→ &quot;Reportar usuario&quot; → [Modal Reporte]
                                   |       └─→ &quot;Bloquear usuario&quot; → Confirmación → [Home Feed]
                                   |
                                   ├─→ Tab &quot;Posts&quot; → Grid Publicaciones
                                   |                     |
                                   |                     └─→ Tap Post → [Detalle Publicación]
                                   |
                                   └─→ Tab &quot;Tagged&quot; → Grid Publicaciones Etiquetadas
                                                          |
                                                          └─→ Tap Post → [Detalle Publicación]</code></pre>
                </div>
            <h3>3.9 Rutas Principales de la Aplicación</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">Ruta                          | Pantalla
------------------------------|------------------------------------------
/                             | SplashScreen
/login                        | LoginView
/register                     | RegisterView
/forgot-password              | ForgotPasswordView
/home                         | HomeView (Feed principal)
/create-post                  | CreatePostView
/post/:id                     | PostDetailView
/notifications                | NotificationView
/stories/:userId              | StoriesView
/create-story                 | CreateStoryView
/explore                      | ExploreView
/map                          | MapView
/create-service               | CreateServiceView
/edit-service/:id             | CreateServiceView (modo edición)
/create-event                 | CreateEventView
/edit-event/:id               | CreateEventView (modo edición)
/chats                        | ChatsView
/chat/:userId                 | ChatPage
/profile                      | UserProfileView (perfil propio)
/profile/:userId              | UserProfileView (perfil de otro usuario)
/edit-profile                 | EditProfileView
/pets                         | PetManagementView
/pet/:petId                   | PetProfileView
/settings                     | SettingsView
/settings/blocked-users       | BlockedUsersView
/settings/change-password     | ChangePasswordView</code></pre>
                </div>
            <hr>
<h2>Notas Finales</h2>
<h3>Características Especiales de Navegación</h3>
<ol>
<li><p><strong>Persistencia de Estado en Bottom Navigation</strong>:</p>
<ul>
<li>Cada tab del Bottom Navigation (Home, Explore, Map, Chats, Profile) mantiene su propio estado</li>
<li>Al cambiar entre tabs, la pantalla anterior preserva su scroll position y datos</li>
</ul>
</li>
<li><p><strong>Modales vs Pantallas Completas</strong>:</p>
<ul>
<li><strong>Modals (Dialog)</strong>: Formularios cortos (agregar mascota, editar datos médicos, agregar registro salud)</li>
<li><strong>Bottom Sheets</strong>: Comentarios, opciones rápidas, selección de fuente de imagen</li>
<li><strong>Pantallas completas</strong>: Crear publicación, crear evento, crear servicio, editar perfil</li>
</ul>
</li>
<li><p><strong>Navegación con Datos</strong>:</p>
<ul>
<li>Cuando se navega con parámetros (<code>:id</code>, <code>:userId</code>, <code>:petId</code>), se pasan IDs numéricos</li>
<li>Las pantallas realizan fetch de datos usando esos IDs</li>
<li>Uso de GetX para gestión de estado y navegación reactiva</li>
</ul>
</li>
<li><p><strong>Pull-to-Refresh Universal</strong>:</p>
<ul>
<li>Todas las listas (feed, notificaciones, mascotas, etc.) soportan pull-to-refresh</li>
<li>Actualiza datos del backend al arrastrar hacia abajo</li>
</ul>
</li>
<li><p><strong>Confirmaciones antes de Acciones Destructivas</strong>:</p>
<ul>
<li>Eliminar publicación/mascota/registro → Confirmación</li>
<li>Bloquear usuario → Confirmación</li>
<li>Cerrar sesión → Confirmación</li>
<li>Eliminar cuenta → Confirmación con advertencia</li>
</ul>
</li>
</ol>
<hr>
<h2>4. ANÁLISIS DEL ESTADO REAL DE LA APP</h2>
<p><strong>Fecha de análisis</strong>: Enero 2025
<strong>Versión analizada</strong>: Pre-lanzamiento MVP</p>
<h3>4.1 Estado General</h3>
<p><strong>✅ Funcionalidades Core Completamente Implementadas</strong> (90% del MVP):</p>
<ul>
<li>✅ Sistema de autenticación completo (login, registro multi-paso, JWT)</li>
<li>✅ Gestión de perfiles de usuario (edición, visualización, estadísticas)</li>
<li>✅ Gestión completa de mascotas (CRUD, perfiles, galería de fotos)</li>
<li>✅ Registros de salud de mascotas (vacunas, desparasitación, recordatorios)</li>
<li>✅ Sistema de publicaciones (crear, ver, feed, me gusta, comentarios)</li>
<li>✅ Sistema de historias (crear, ver, 24h duración, interacciones)</li>
<li>✅ Sistema social completo (seguir, seguidores, likes, comentarios)</li>
<li>✅ Notificaciones (sistema de eventos backend listo para push)</li>
<li>✅ Sistema de bloqueo de usuarios (completo)</li>
<li>✅ Sistema de reportes en perfiles (frontend implementado)</li>
<li>✅ Servicios marketplace (CRUD completo, mapa, filtros)</li>
<li>✅ Eventos (CRUD completo, mapa, visualización)</li>
<li>✅ Mensajería/Chat (conversaciones, mensajes en tiempo real)</li>
<li>✅ Dark mode (claro, oscuro, automático)</li>
<li>✅ Seguridad robusta (rate limiting, sanitización, audit logging)</li>
</ul>
<hr>
<h3>4.2 🚨 Problemas Críticos Detectados</h3>
<h4>4.2.1 Navegación Profunda Excesiva (CRÍTICO)</h4>
<p><strong>Problema</strong>: El usuario puede quedar &quot;atrapado&quot; en stacks de navegación de 6-7+ niveles sin forma fácil de volver al inicio.</p>
<p><strong>Ejemplos problemáticos reales</strong>:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="language">plaintext</span>
                        <button class="copy-button" onclick="copyToClipboard(this)" title="Copy to clipboard">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <pre><code class="hljs language-plaintext">Home → Tap Avatar → Perfil Usuario → Tap Mascota → Perfil Mascota
    → Tap Post → Detalle Post → Tap Avatar → Perfil Usuario
    → Seguidores → Tap Usuario → Perfil Usuario → ... (∞)</code></pre>
                </div>
            <p><strong>Flujos afectados</strong>:</p>
<ol>
<li><p><strong>Feed → Perfiles</strong> (5-7 niveles)</p>
<ul>
<li>Home Feed → Perfil Usuario → Perfil Mascota → Posts → Usuario → Seguidores → Usuario → ...</li>
</ul>
</li>
<li><p><strong>Explorar → Matching → Perfiles</strong> (6+ niveles)</p>
<ul>
<li>Explorar → Matching → Mascota → Posts → Usuario → Mascota → ...</li>
</ul>
</li>
<li><p><strong>Comentarios → Perfiles</strong> (Confusión visual)</p>
<ul>
<li>Home → Modal Comentarios → Perfil Usuario (navegación desde modal crea ambigüedad)</li>
</ul>
</li>
<li><p><strong>Mi Perfil → Seguidores → Perfiles</strong> (7+ niveles)</p>
<ul>
<li>Mi Perfil → Seguidores → Usuario → Mascota → Posts → Usuario → ...</li>
</ul>
</li>
</ol>
<p><strong>Impacto UX</strong>:</p>
<ul>
<li>❌ Usuario no sabe cómo volver al inicio</li>
<li>❌ Botón back requiere 6-7+ taps para volver</li>
<li>❌ Confusión sobre contexto actual</li>
<li>❌ Stack de memoria crece excesivamente</li>
</ul>
<p><strong>Soluciones propuestas</strong> (ver <a href="../CLAUDE.md">CLAUDE.md</a> - Tareas de Navegación):</p>
<ol>
<li>Botón &quot;Home&quot; (escape hatch) cuando stack &gt; 3 niveles</li>
<li>Cerrar modales antes de navegar a perfiles</li>
<li>Quick View Sheets para mascotas/usuarios (vista rápida sin navegación profunda)</li>
<li>Usar <code>fullscreenDialog: true</code> cuando stack &gt; 3</li>
<li>Agregar <code>preventDuplicates: true</code> en todas las navegaciones</li>
</ol>
<p><strong>Estado</strong>: 🔴 Sin implementar - 6 tareas pendientes (ver CLAUDE.md)</p>
<hr>
<h4>4.2.2 Servicios: Carga Lenta del Mapa</h4>
<p><strong>Problema</strong>: La pantalla de Mapa tarda excesivamente en cargar los servicios (~3-5 segundos).</p>
<p><strong>Causas identificadas</strong>:</p>
<ul>
<li>Posible falta de paginación en endpoint de servicios</li>
<li>Carga de todos los servicios de una vez sin límite geográfico</li>
<li>Falta de caché de datos</li>
</ul>
<p><strong>Impacto UX</strong>:</p>
<ul>
<li>❌ Loading prolongado frustra al usuario</li>
<li>❌ Mal rendimiento percibido de la app</li>
</ul>
<p><strong>Solución propuesta</strong>:</p>
<ul>
<li>Implementar paginación/lazy loading por área visible</li>
<li>Agregar caché de servicios por región</li>
<li>Optimizar query del backend con índices geoespaciales</li>
</ul>
<p><strong>Estado</strong>: 🟡 Identificado, pendiente de optimización</p>
<hr>
<h3>4.3 ⚠️ Funcionalidades Faltantes (Requisitos para App Store/Play Store)</h3>
<h4>4.3.1 Sistema de Reportes/Denuncias (Parcial)</h4>
<p><strong>Estado actual</strong>:</p>
<ul>
<li>✅ Frontend: Botón &quot;Denunciar&quot; en perfiles de usuario implementado</li>
<li>✅ Frontend: Botón &quot;Denunciar&quot; en publicaciones implementado</li>
<li>✅ Frontend: Botón &quot;Denunciar&quot; en historias implementado</li>
<li>❌ Frontend: Botón &quot;Denunciar&quot; en comentarios <strong>FALTA</strong></li>
<li>❌ Backend: Panel de gestión de reportes para admins <strong>FALTA</strong></li>
<li>❌ Backend: Notificación automática cuando se recibe reporte <strong>FALTA</strong></li>
</ul>
<p><strong>Prioridad</strong>: 🔴 CRÍTICA (requerido para App Store/Play Store)</p>
<p><strong>Tareas pendientes</strong>:</p>
<ol>
<li>Agregar botón &quot;Denunciar&quot; en <code>post_comments_modal.dart</code> y <code>story_comments_modal.dart</code></li>
<li>Crear panel de admin para revisar reportes</li>
<li>Implementar sistema de notificación automática a admins</li>
</ol>
<hr>
<h4>4.3.2 Eliminación de Comentarios Propios (Parcial)</h4>
<p><strong>Estado actual</strong>:</p>
<ul>
<li>✅ Backend: Servicios <code>deleteComment()</code> implementados en <code>post_comment_service.dart</code> y <code>story_comment_service.dart</code></li>
<li>❌ Frontend: Botón UI para eliminar comentarios propios <strong>FALTA</strong></li>
</ul>
<p><strong>Prioridad</strong>: 🟡 MEDIA (buena práctica UX)</p>
<p><strong>Tarea pendiente</strong>:</p>
<ul>
<li>Agregar botón de eliminar (icono papelera) en comentarios propios en modals</li>
<li>Mostrar solo si el usuario es el autor del comentario</li>
<li>Agregar confirmación antes de eliminar</li>
</ul>
<hr>
<h4>4.3.3 Control de Privacidad (No Implementado)</h4>
<p><strong>Estado actual</strong>:</p>
<ul>
<li>❌ Perfil público/privado <strong>FALTA</strong></li>
<li>❌ Control de quién puede ver historias <strong>FALTA</strong></li>
<li>❌ Control de quién puede comentar posts <strong>FALTA</strong></li>
</ul>
<p><strong>Prioridad</strong>: 🟡 MEDIA (diferenciador de producto)</p>
<p><strong>Impacto</strong>: Funcionalidad esperada en redes sociales modernas, aumenta confianza del usuario</p>
<hr>
<h4>4.3.4 Búsqueda de Usuarios/Mascotas/Hashtags (No Implementado)</h4>
<p><strong>Estado actual</strong>:</p>
<ul>
<li>❌ Búsqueda de usuarios por nombre/username <strong>FALTA</strong></li>
<li>❌ Búsqueda de mascotas <strong>FALTA</strong></li>
<li>❌ Búsqueda por hashtags <strong>FALTA</strong></li>
<li>✅ Lupa en pantalla de inicio <strong>OCULTA</strong> (implementación pendiente)</li>
</ul>
<p><strong>Prioridad</strong>: 🟢 BAJA (post-MVP)</p>
<p><strong>Nota</strong>: La lupa en Home fue intencionalmente ocultada hasta implementar búsqueda funcional</p>
<hr>
<h3>4.4 ❌ Funcionalidades Redundantes/Eliminadas</h3>
<h4>4.4.1 Galería de Fotos de Usuario (ELIMINADO)</h4>
<p><strong>Razón de eliminación</strong>: Funcionalidad completamente redundante con el sistema de publicaciones.</p>
<p><strong>Archivos eliminados</strong>:</p>
<ul>
<li><code>gallery_controller.dart</code></li>
<li><code>gallery_view.dart</code></li>
<li><code>gallery_service.dart</code></li>
<li><code>user_gallery_models.dart</code></li>
</ul>
<p><strong>Impacto</strong>:</p>
<ul>
<li>✅ Reduce complejidad del código</li>
<li>✅ Evita confusión del usuario (¿galería vs publicaciones?)</li>
<li>✅ Backend sigue existiendo pero no se usa en frontend</li>
</ul>
<p><strong>Estado</strong>: ✅ COMPLETADO - Tab &quot;Galería&quot; eliminado del perfil de usuario</p>
<hr>
<h3>4.5 🐛 Bugs y Problemas Conocidos</h3>
<h4>4.5.1 Funcionalidad &quot;Copiar enlace&quot; y &quot;Compartir&quot; No Funcionan</h4>
<p><strong>Afectado</strong>: Publicaciones e historias</p>
<p><strong>Problema</strong>: Los botones existen en la UI pero no ejecutan ninguna acción</p>
<p><strong>Prioridad</strong>: 🟡 MEDIA</p>
<p><strong>Solución propuesta</strong>: Implementar <code>share_plus</code> package para compartir contenido</p>
<hr>
<h4>4.5.2 Swipe en Notificaciones No Funciona Correctamente</h4>
<p><strong>Problema</strong>: La funcionalidad de swipe para eliminar o marcar como leída no responde bien</p>
<p><strong>Prioridad</strong>: 🟡 MEDIA</p>
<p><strong>Solución propuesta</strong>:</p>
<ul>
<li>Opción 1: Eliminar funcionalidad de swipe (recomendado - simplicidad)</li>
<li>Opción 2: Refactorizar con <code>flutter_slidable</code> package</li>
</ul>
<hr>
<h4>4.5.3 Panel de Notificaciones No Ocupa Pantalla Completa</h4>
<p><strong>Problema</strong>: El recuadro de notificaciones no abarcar toda la pantalla, dejando espacios en blanco</p>
<p><strong>Prioridad</strong>: 🟢 BAJA (estético)</p>
<p><strong>Solución propuesta</strong>: Ajustar layout para fullscreen</p>
<hr>
<h3>4.6 📊 Evaluación de Requisitos Funcionales</h3>
<p><strong>Estado de Requisitos Funcionales</strong> (RF-001 a RF-094):</p>
<table>
<thead>
<tr>
<th>Categoría</th>
<th>Total RFs</th>
<th>Implementados</th>
<th>Parciales</th>
<th>Faltantes</th>
<th>% Completado</th>
</tr>
</thead>
<tbody><tr>
<td>Autenticación (RF-001 a RF-007)</td>
<td>7</td>
<td>7</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Perfil Usuario (RF-008 a RF-013)</td>
<td>6</td>
<td>6</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Mascotas (RF-014 a RF-020)</td>
<td>7</td>
<td>7</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Salud Mascotas (RF-021 a RF-025)</td>
<td>5</td>
<td>5</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Publicaciones (RF-026 a RF-035)</td>
<td>10</td>
<td>9</td>
<td>1</td>
<td>0</td>
<td>95% ✅</td>
</tr>
<tr>
<td>Historias (RF-036 a RF-042)</td>
<td>7</td>
<td>7</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Servicios (RF-043 a RF-050)</td>
<td>8</td>
<td>8</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Eventos (RF-051 a RF-058)</td>
<td>8</td>
<td>8</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Notificaciones (RF-059 a RF-064)</td>
<td>6</td>
<td>6</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Mensajería (RF-065 a RF-069)</td>
<td>5</td>
<td>5</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Reportes (RF-070 a RF-073)</td>
<td>4</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>85% ⚠️</td>
</tr>
<tr>
<td>Bloqueo (RF-074 a RF-077)</td>
<td>4</td>
<td>4</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Configuración (RF-078 a RF-083)</td>
<td>6</td>
<td>6</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Seguridad (RF-084 a RF-089)</td>
<td>6</td>
<td>6</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td>Multimedia (RF-090 a RF-094)</td>
<td>5</td>
<td>5</td>
<td>0</td>
<td>0</td>
<td>100% ✅</td>
</tr>
<tr>
<td><strong>TOTAL</strong></td>
<td><strong>94</strong></td>
<td><strong>92</strong></td>
<td><strong>2</strong></td>
<td><strong>0</strong></td>
<td><strong>98%</strong> ✅</td>
</tr>
</tbody></table>
<p><strong>Requisitos Parcialmente Implementados</strong>:</p>
<ol>
<li><strong>RF-033</strong>: &quot;El usuario debe poder eliminar comentarios en sus propias publicaciones&quot; - Backend ✅, Frontend UI ❌</li>
<li><strong>RF-072</strong>: &quot;El sistema debe categorizar reportes&quot; - Frontend ✅, Panel Admin ❌</li>
</ol>
<hr>
<h3>4.7 🎯 Análisis de Pantallas Implementadas</h3>
<p><strong>Total de pantallas/vistas documentadas</strong>: 25
<strong>Estado de implementación</strong>: 25/25 (100%) ✅</p>
<p>Todas las pantallas principales están completamente implementadas y funcionales. Los problemas detectados son de UX/navegación, no de falta de implementación.</p>
<hr>
<h3>4.8 🔄 Flujos de Navegación - Evaluación</h3>
<p><strong>Flujos documentados en sección 3</strong>: 9 flujos principales</p>
<p><strong>Evaluación por flujo</strong>:</p>
<table>
<thead>
<tr>
<th>Flujo</th>
<th>Estado</th>
<th>Problemas</th>
</tr>
</thead>
<tbody><tr>
<td>3.1 Autenticación</td>
<td>✅ Perfecto</td>
<td>Ninguno</td>
</tr>
<tr>
<td>3.2 Principal (Bottom Nav)</td>
<td>⚠️ Funcional con problemas</td>
<td>Navegación profunda excesiva</td>
</tr>
<tr>
<td>3.3 Gestión de Mascotas</td>
<td>✅ Perfecto</td>
<td>Ninguno</td>
</tr>
<tr>
<td>3.4 Historias</td>
<td>✅ Perfecto</td>
<td>Ninguno</td>
</tr>
<tr>
<td>3.5 Configuración</td>
<td>✅ Perfecto</td>
<td>Ninguno</td>
</tr>
<tr>
<td>3.6 Notificaciones</td>
<td>⚠️ Funcional con bugs menores</td>
<td>Swipe no funciona bien</td>
</tr>
<tr>
<td>3.7 Crear Publicación</td>
<td>✅ Perfecto</td>
<td>Ninguno</td>
</tr>
<tr>
<td>3.8 Perfil de Otro Usuario</td>
<td>⚠️ Funcional con problemas</td>
<td>Navegación profunda excesiva</td>
</tr>
<tr>
<td>3.9 Rutas Principales</td>
<td>✅ Todas implementadas</td>
<td>Ninguno</td>
</tr>
</tbody></table>
<p><strong>Problemas de navegación identificados</strong>: Ver sección 4.2.1</p>
<hr>
<h3>4.9 📝 Conclusiones y Recomendaciones</h3>
<h4>✅ Fortalezas de la App</h4>
<ol>
<li><strong>Funcionalidad Core Completa</strong>: 98% de requisitos funcionales implementados</li>
<li><strong>Seguridad Robusta</strong>: Rate limiting, sanitización, audit logging, JWT</li>
<li><strong>Sistema Social Completo</strong>: Follows, likes, comentarios, notificaciones funcionan perfectamente</li>
<li><strong>UX Moderna</strong>: Animaciones, dark mode, micro-interacciones implementadas</li>
<li><strong>Arquitectura Sólida</strong>: GetX + Atomic Design + Reactive Forms bien aplicados</li>
</ol>
<h4>🚨 Áreas Críticas que Requieren Atención Inmediata</h4>
<ol>
<li><strong>Navegación profunda</strong> (6 tareas documentadas en CLAUDE.md)</li>
<li><strong>Sistema de reportes para admins</strong> (requerido para app stores)</li>
<li><strong>Performance del mapa de servicios</strong> (optimización backend)</li>
</ol>
<h4>🟡 Mejoras Recomendadas para Pre-Lanzamiento</h4>
<ol>
<li>Completar sistema de reportes (backend admin panel)</li>
<li>Agregar eliminación de comentarios propios (UI)</li>
<li>Implementar navegación con escape hatch</li>
<li>Fix funcionalidad de compartir</li>
</ol>
<h4>🟢 Features Post-MVP (No Bloqueantes)</h4>
<ol>
<li>Búsqueda de usuarios/mascotas/hashtags</li>
<li>Control de privacidad avanzado</li>
<li>Verificación de cuentas (badges)</li>
<li>Deep linking para notificaciones push</li>
</ol>
<h4>📊 Estado General del Proyecto</h4>
<p><strong>Evaluación final</strong>: <strong>Petos está en excelente estado para lanzamiento MVP</strong> (98% completado).</p>
<p>Los problemas identificados son:</p>
<ul>
<li><strong>UX/navegación</strong> (solucionables en 1-2 sprints)</li>
<li><strong>Features faltantes</strong> (requeridos por app stores, priorizables)</li>
<li><strong>Bugs menores</strong> (no bloqueantes)</li>
</ul>
<p><strong>Recomendación</strong>: Priorizar las 6 tareas de navegación + sistema de reportes admin antes del lanzamiento oficial.</p>
<hr>
<p><strong>Fin del Documento</strong></p>

</body>
</html>